{
    "name": "devc",
    "build": {
        "dockerfile": "Dockerfile"
    },
    "features": {
        // Docker-in-Docker: installs Docker Engine + starts dockerd on boot
        "ghcr.io/devcontainers/features/docker-in-docker:2": {
            "dockerDashComposeVersion": "v2"
        }
    },

    // Privileged is needed for Docker-in-Docker and Podman-in-container
    "privileged": true,

    "customizations": {
        "vscode": {
            "extensions": [
                "rust-lang.rust-analyzer",
                "tamasfe.even-better-toml",
                "serayuzgur.crates",
                "vadimcn.vscode-lldb"
            ]
        }
    },

    // Pre-fetch crate dependencies after container creation
    "postCreateCommand": "cargo fetch",

    "remoteUser": "vscode"
}
